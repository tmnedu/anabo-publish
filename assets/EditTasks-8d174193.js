import{d as y,o as l,a as r,w as k,v as f,b as n,j as T,t as g,r as m,c,u as w,k as C,e as a,i as b,F as h,f as $,l as L,g as V}from"./index-56ee9ada.js";import{f as p}from"./index-a8126e01.js";const B={class:"task"},D=y({__name:"AdminTaskRow",props:{task:null},setup(u){return(t,o)=>(l(),r("div",B,[k(n("input",{style:{padding:"8px"},"onUpdate:modelValue":o[0]||(o[0]=e=>u.task.title=e)},null,512),[[f,u.task.title]]),T(" "+g(u.task.id)+" ",1),n("button",{style:{padding:"8px"},onClick:o[1]||(o[1]=e=>t.$emit("remove"))},"Удалить")]))}}),R={style:{"margin-bottom":"12px"}},N=n("h1",null,"Выбрать месяц:",-1),S={style:{display:"flex","justify-content":"center","align-items":"center"}},j={key:0,textContent:"Производится сохранение ⌛"},E={key:1,textContent:"Задачи сохранены ✔️"},q=y({__name:"EditTasks",setup(u){let t=m(p(new Date,"yyyy-MM"));const o=c(()=>p(new Date(t.value),"LLLL yyyy"));let e=m("none");const d=w(),x=c(()=>d.getMonthTasks(t.value));async function _(){e.value="saving",await d.saveTasks(),e.value="saved"}async function M(v){e.value="saving",await d.removeTask(v),e.value="saved"}return C(()=>e.value="none"),(v,i)=>(l(),r("div",null,[n("div",R,[N,k(n("input",{"onUpdate:modelValue":i[0]||(i[0]=s=>b(t)?t.value=s:t=s),type:"month"},null,512),[[f,a(t)]])]),n("h1",null,"Управление задачами на "+g(a(o)),1),(l(!0),r(h,null,$(a(x),s=>(l(),V(D,{key:s.id,task:s,onRemove:F=>M(s.id)},null,8,["task","onRemove"]))),128)),n("div",S,[n("button",{style:{padding:"8px",margin:"auto"},onClick:i[1]||(i[1]=s=>a(d).newTask(a(t)))}," Добавить новую задачу ")]),n("button",{onClick:i[2]||(i[2]=s=>_()),class:"big-button",textContent:"Сохранить"}),a(e)=="saving"?(l(),r("span",j)):a(e)=="saved"?(l(),r("span",E)):L("",!0)]))}});export{q as default};
